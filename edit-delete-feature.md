# 編輯和刪除功能說明

## 🎯 新增的編輯和刪除功能

### ✅ **歷史頁面功能**

#### 編輯功能
- 每個 URL 項目下方都有「✏️ Edit」按鈕
- 點擊後會展開編輯表單，可以修改：
  - URL 地址
  - 評論
  - 自定義 slug
  - 過期時間
- 支援 `PUT /api/link/edit` API
- 編輯後會自動更新本地存儲和顯示

#### 刪除功能
- 每個 URL 項目下方都有「🗑️ Delete」按鈕
- 點擊後會顯示確認對話框
- 支援 `POST /api/link/delete` API
- 刪除後會從本地存儲和 API 中移除

### ✅ **彈出窗口功能**

#### 快速操作
- 每個歷史項目下方有迷你按鈕：
  - 「✏️」編輯按鈕：點擊會打開歷史頁面並自動展開編輯表單
  - 「🗑️」刪除按鈕：快速刪除功能
- 操作結果會在彈出窗口中顯示

### ✅ **智能導航**
- 從彈出窗口點擊編輯會自動：
  1. 打開歷史頁面
  2. 定位到對應的 URL 項目
  3. 自動展開編輯表單
  4. 滾動到該項目位置

## 📋 API 整合

### 編輯 API
```http
PUT /api/link/edit
Headers:
  authorization: Bearer YOUR_TOKEN
  content-type: application/json
Body:
{
  "url": "https://new-url.com",
  "slug": "custom-slug",
  "comment": "Updated comment",
  "expiration": "7d"
}
```

### 刪除 API
```http
POST /api/link/delete
Headers:
  authorization: Bearer YOUR_TOKEN
  content-type: application/json
Body:
{
  "slug": "url-slug-to-delete"
}
```

## 🎨 用戶介面

### 歷史頁面樣式
- 編輯表單使用淺灰色背景區別顯示
- 編輯和刪除按鈕使用不同顏色：
  - 編輯：黃色 (#ffc107)
  - 刪除：紅色 (#dc3545)
- 編輯表單可收合，節省空間

### 彈出窗口樣式
- 迷你按鈕設計，不影響主要內容
- 操作確認和結果回饋
- 與統計資料協調顯示

## 🔧 技術實作

### 檔案更新：
1. **history.html** - 新增編輯和刪除按鈕樣式
2. **history.js** - 實作編輯和刪除功能
3. **popup.html** - 新增迷你按鈕樣式
4. **popup.js** - 實作快速刪除和編輯導航

### 資料同步：
- 編輯和刪除操作會同時更新：
  - 遠端 API 伺服器
  - 本地瀏覽器存儲
  - 用戶介面顯示
- 操作失敗時會回滾本地變更

## 🚀 使用方式

### 歷史頁面編輯：
1. 進入歷史頁面
2. 找到要編輯的 URL
3. 點擊「✏️ Edit」按鈕
4. 修改所需欄位
5. 點擊「💾 Save」保存

### 歷史頁面刪除：
1. 找到要刪除的 URL
2. 點擊「🗑️ Delete」按鈕
3. 確認刪除操作

### 彈出窗口快速操作：
1. 點擊擴展圖標
2. 在歷史項目下方點擊：
   - 「✏️」快速編輯（會打開歷史頁面）
   - 「🗑️」快速刪除

## ⚠️ 注意事項

1. **API 依賴**：編輯和刪除需要有效的 API 連線
2. **許可權限**：某些 API 可能不允許編輯或刪除（如預覽模式）
3. **資料安全**：刪除操作不可逆，請謹慎操作
4. **網路連線**：離線時無法進行編輯和刪除操作

## 🐛 錯誤處理

- API 錯誤會顯示具體錯誤訊息
- 網路錯誤會提示連線問題
- 許可權錯誤會提示設定問題
- 操作失敗時會保持原始資料不變

這些功能讓用戶可以完整管理他們的短網址，包括建立、查看、編輯、刪除和統計分析！
